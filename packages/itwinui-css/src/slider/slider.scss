// Copyright (c) Bentley Systems, Incorporated. All rights reserved.
// See LICENSE.md in the project root for license terms and full copyright notice.
@use '../mixins';

// #region Slider container
.iui-slider-container {
  --_iui-slider-container-gap: var(--iui-size-s);
  --_iui-slider-rail-color: var(--iui-color-border);
  --_iui-slider-thumb-border-color: var(--iui-color-border-foreground);
  --_iui-slider-thumb-color: var(--iui-color-background);
  --_iui-slider-thumb-cursor: grab;
  --_iui-slider-thumb-size: var(--iui-size-m);
  --_iui-slider-ticks-placement: 37px; // TODO: Figure out a calc for this
  --_iui-slider-tick-size: var(--iui-size-s);
  --_iui-slider-tick-thickness: 1px;
  --_iui-slider-track-color: var(--iui-color-border-accent);
  --_iui-slider-track-thickness: calc(var(--_iui-slider-thumb-size) * 0.25);

  display: grid;

  &[data-iui-orientation='horizontal'] {
    grid-template-columns: auto 1fr auto;
    grid-template-areas: 'min content max';
    align-items: center;

    .iui-slider-min,
    .iui-slider-max {
      align-items: center;
    }

    .iui-slider-min {
      margin-inline-end: var(--_iui-slider-container-gap);
      justify-content: end;
    }

    .iui-slider-max {
      margin-inline-start: var(--_iui-slider-container-gap);
    }

    .iui-slider-ticks {
      margin-block-start: var(--_iui-slider-ticks-placement);
    }

    .iui-slider-tick {
      flex-direction: column;
      inline-size: var(--_iui-slider-tick-thickness);

      &::before {
        inline-size: var(--_iui-slider-tick-thickness);
        block-size: var(--_iui-slider-tick-size);
      }
    }

    .iui-slider {
      block-size: calc(var(--_iui-slider-thumb-size) + 2px);
      touch-action: pan-x;

      &::before {
        grid-column-start: 1;
        inline-size: 100%;
      }
    }

    .iui-slider::before,
    .iui-slider-track {
      block-size: var(--_iui-slider-track-thickness);
    }

    .iui-slider-track {
      inset-inline-start: 0;
      inset-block-start: 50%;
      transform: translateY(-50%);
    }

    .iui-slider-thumb {
      transform: translateX(-50%);
    }
  }

  &[data-iui-orientation='vertical'] {
    grid-template-rows: auto 1fr auto;
    grid-template-areas:
      'max'
      'content'
      'min';
    justify-items: center;

    .iui-slider-min,
    .iui-slider-max {
      justify-content: center;
    }

    .iui-slider-min {
      margin-block-start: var(--_iui-slider-container-gap);
    }

    .iui-slider-max {
      margin-block-end: var(--_iui-slider-container-gap);
    }

    .iui-slider-ticks {
      flex-direction: column-reverse;
      margin-inline-start: var(--_iui-slider-ticks-placement);
    }

    .iui-slider-tick {
      block-size: var(--_iui-slider-tick-thickness);

      &::before {
        inline-size: var(--_iui-slider-tick-size);
        block-size: var(--_iui-slider-tick-thickness);
      }
    }

    .iui-slider {
      inline-size: calc(var(--_iui-slider-thumb-size) + 2px);
      touch-action: pan-y;

      &::before {
        block-size: 100%;
        grid-row: 1 / 3;
      }
    }

    .iui-slider::before,
    .iui-slider-track {
      inline-size: var(--_iui-slider-track-thickness);
    }

    .iui-slider-track {
      inset-block-end: 0;
      inset-inline-start: 50%;
      transform: translateX(-50%);
    }

    .iui-slider-thumb {
      transform: translateY(50%);
    }
  }

  &[data-iui-disabled='true'] {
    cursor: not-allowed;
    color: var(--iui-color-text-disabled);

    --_iui-slider-rail-color: var(--iui-color-background-disabled);
    --_iui-slider-track-color: var(--iui-color-border);
    @media (forced-colors: active) {
      --_iui-slider-track-color: GrayText;
    }

    .iui-slider {
      pointer-events: none;
    }
  }
}

.iui-slider-min,
.iui-slider-max {
  user-select: all;
  display: flex;

  svg {
    @include mixins.iui-icon-style('m');
    @include mixins.iui-icon-color;
  }
}

.iui-slider-min {
  grid-area: min;
}

.iui-slider-max {
  grid-area: max;
}

.iui-slider-ticks {
  position: relative;
  display: flex;
  pointer-events: none;
  justify-content: space-between;
  user-select: none;
  grid-area: content;
}

.iui-slider-tick {
  position: relative;
  display: flex;
  pointer-events: none;
  align-items: center;
  color: var(--_iui-slider-tick-text-color);

  &::before {
    content: '';
    background-color: var(--iui-color-border);
    @media (forced-colors: active) {
      background-color: CanvasText;
    }
  }
}
// #endregion Slider container

// #region Slider
.iui-slider {
  display: grid;
  position: relative;
  cursor: pointer;
  isolation: isolate;
  grid-area: content;

  &.iui-grabbing {
    cursor: grabbing;
  }

  &::before {
    content: '';
    grid-row: 1 / 3;
    display: flex;
    background-color: var(--_iui-slider-rail-color);
    grid-area: inherit;
    @media (forced-colors: active) {
      --_iui-slider-rail-color: CanvasText;
    }
  }
}

.iui-slider-thumb {
  box-sizing: content-box;
  position: absolute;
  block-size: var(--_iui-slider-thumb-size);
  inline-size: var(--_iui-slider-thumb-size);
  border-radius: 100%;
  z-index: 1;
  cursor: var(--_iui-slider-thumb-cursor);
  @include mixins.iui-focus($thickness: 2px);
  background: var(--iui-color-background);
  border: 1px solid var(--iui-color-border-foreground);

  &:active {
    --_iui-slider-thumb-cursor: grabbing;
  }

  &[aria-disabled='true'] {
    border-color: var(--iui-color-border);
    background: var(--iui-color-border);
    --_iui-slider-thumb-cursor: not-allowed;

    @media (forced-colors: active) {
      border-color: GrayText;
      background: GrayText;
    }
  }
}

.iui-slider-track {
  pointer-events: none;
  background-color: var(--_iui-slider-track-color);
  position: absolute;

  @media (forced-colors: active) {
    --_iui-slider-track-color: Highlight;
  }
}
// #endregion Slider
